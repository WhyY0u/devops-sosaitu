import{a as _,r,j as s}from"./index-3cPMuINo.js";import{M as $}from"./index-xs-jf80h.js";const R="_main_container_6gltl_1",D="_text_one_6gltl_7",q="_text_two_6gltl_13",M="_menu_6gltl_19",E="_menu_button_6gltl_26",L="_active_6gltl_45",U="_analytics_card_6gltl_51",G="_card_header_6gltl_59",P="_analytics_title_6gltl_68",O="_ai_button_6gltl_75",V="_disabled_6gltl_91",z="_empty_state_6gltl_103",B="_stats_grid_6gltl_110",F="_stat_card_6gltl_117",H="_stat_icon_6gltl_131",J="_stat_label_6gltl_136",K="_stat_value_6gltl_142",Q="_category_stats_6gltl_148",W="_category_title_6gltl_156",X="_category_grid_6gltl_163",Y="_category_item_6gltl_169",Z="_category_name_6gltl_185",ss="_category_count_6gltl_191",es="_supervisors_grid_6gltl_244",ts="_supervisor_card_6gltl_251",as="_supervisor_header_6gltl_265",rs="_supervisor_avatar_6gltl_274",ls="_supervisor_info_6gltl_287",is="_supervisor_name_6gltl_291",cs="_supervisor_types_6gltl_298",os="_supervisor_stats_6gltl_307",_s="_supervisor_stat_item_6gltl_320",ns="_supervisor_stat_icon_6gltl_329",ds="_supervisor_stat_label_6gltl_333",us="_supervisor_stat_value_6gltl_341",vs="_supervisor_stat_value_problem_6gltl_347",ps="_supervisor_footer_6gltl_353",ms="_supervisor_status_6gltl_362",hs="_online_6gltl_372",xs="_delete_button_6gltl_376",gs="_checkbox_group_6gltl_395",js="_checkbox_label_6gltl_407",Ns="_checkbox_text_6gltl_430",ys="_checkbox_code_6gltl_437",bs="_add_button_6gltl_446",fs="_ai_report_6gltl_482",ks="_supervisor_modal_header_6gltl_728",Ss="_supervisor_modal_title_6gltl_735",ws="_supervisor_modal_description_6gltl_742",As="_supervisor_modal_body_6gltl_749",Cs="_form_description_6gltl_753",Ts="_required_6gltl_759",Is="_submit_button_6gltl_764",$s="_modal_actions_6gltl_783",Rs="_cancel_button_6gltl_791",e={main_container:R,text_one:D,text_two:q,menu:M,menu_button:E,active:L,analytics_card:U,card_header:G,analytics_title:P,ai_button:O,disabled:V,empty_state:z,stats_grid:B,stat_card:F,stat_icon:H,stat_label:J,stat_value:K,category_stats:Q,category_title:W,category_grid:X,category_item:Y,category_name:Z,category_count:ss,supervisors_grid:es,supervisor_card:ts,supervisor_header:as,supervisor_avatar:rs,supervisor_info:ls,supervisor_name:is,supervisor_types:cs,supervisor_stats:os,supervisor_stat_item:_s,supervisor_stat_icon:ns,supervisor_stat_label:ds,supervisor_stat_value:us,supervisor_stat_value_problem:vs,supervisor_footer:ps,supervisor_status:ms,online:hs,delete_button:xs,checkbox_group:gs,checkbox_label:js,checkbox_text:Ns,checkbox_code:ys,add_button:bs,ai_report:fs,supervisor_modal_header:ks,supervisor_modal_title:Ss,supervisor_modal_description:ws,supervisor_modal_body:As,form_description:Cs,required:Ts,submit_button:Is,modal_actions:$s,cancel_button:Rs};class Ds{async getAnalytics(){return(await _.get("/city-admin/analytics")).data}async getAiInsights(){return(await _.get("/city-admin/ai-insights")).data}async getSupervisors(){return(await _.get("/city-admin/supervisors")).data}async getTicketTypes(){return(await _.get("/user/ticket-types")).data}async addSupervisor(c,a){return(await _.post("/city-admin/add-supervisor",{userId:c,types:a})).data}async deleteSupervisor(c){await _.delete(`/city-admin/supervisor/${c}`)}async getMonthlyReport(){return(await _.get("/city-admin/monthly-report")).data}}const Es=()=>{const[i,c]=r.useState("analytics"),[a,f]=r.useState(null),[g,j]=r.useState(""),[k,S]=r.useState(!0),[v,N]=r.useState(!1),[p,m]=r.useState([]),[w,d]=r.useState(!1),[h,y]=r.useState(""),[n,x]=r.useState([]),[A,C]=r.useState([]),o=new Ds;r.useEffect(()=>{(async()=>{try{console.log("Loading analytics...");const l=await o.getAnalytics();console.log("Analytics loaded:",l),f(l),console.log("Loading supervisors...");const u=await o.getSupervisors();console.log("Supervisors loaded:",u),m(u),console.log("Loading ticket types...");const b=await o.getTicketTypes();console.log("Ticket types loaded:",b),C(b)}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:",l)}finally{S(!1)}})()},[]);const T=async()=>{N(!0);try{const t=await o.getAiInsights();j(t)}catch(t){console.warn("AI –æ—Ç—á–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:",t),j("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç")}finally{N(!1)}},I=async()=>{if(!h||n.length===0){alert("–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤");return}try{await o.addSupervisor(parseInt(h),n),d(!1),y(""),x([]);const t=await o.getSupervisors();m(t)}catch(t){alert(t.response?.data||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ supervisor")}};return k?s.jsx("div",{className:e.main_container,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):s.jsxs("div",{className:e.main_container,children:[s.jsx("p",{className:e.text_one,children:"–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞"}),s.jsx("p",{className:e.text_two,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤–∞—à–µ–º—É –≥–æ—Ä–æ–¥—É"}),s.jsxs("div",{className:e.menu,children:[s.jsx("button",{className:`${e.menu_button} ${i==="analytics"?e.active:""}`,onClick:()=>c("analytics"),children:"üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞"}),s.jsx("button",{className:`${e.menu_button} ${i==="report"?e.active:""}`,onClick:()=>c("report"),children:"üìã AI-–æ—Ç—á–µ—Ç"}),s.jsx("button",{className:`${e.menu_button} ${i==="supervisors"?e.active:""}`,onClick:()=>c("supervisors"),children:"üë• Supervisors"})]}),i==="analytics"&&a&&s.jsxs("div",{className:e.analytics_card,children:[s.jsx("div",{className:e.card_header,children:s.jsx("h2",{className:e.analytics_title,children:"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É"})}),s.jsxs("div",{className:e.stats_grid,children:[s.jsxs("div",{className:e.stat_card,children:[s.jsx("div",{className:e.stat_icon,children:"üì¨"}),s.jsx("div",{className:e.stat_label,children:"–í—Å–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏–π"}),s.jsx("div",{className:e.stat_value,children:a.totalTickets})]}),s.jsxs("div",{className:e.stat_card,children:[s.jsx("div",{className:e.stat_icon,children:"üìÖ"}),s.jsx("div",{className:e.stat_label,children:"–ó–∞ –º–µ—Å—è—Ü"}),s.jsx("div",{className:e.stat_value,children:a.ticketsMonth})]}),s.jsxs("div",{className:e.stat_card,children:[s.jsx("div",{className:e.stat_icon,children:"‚ö†Ô∏è"}),s.jsx("div",{className:e.stat_label,children:"–ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö"}),s.jsx("div",{className:e.stat_value,children:a.problemTickets})]}),s.jsxs("div",{className:e.stat_card,children:[s.jsx("div",{className:e.stat_icon,children:"‚è±Ô∏è"}),s.jsx("div",{className:e.stat_label,children:"–°—Ä. –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞"}),s.jsxs("div",{className:e.stat_value,children:[a.avgResponseTime," —á"]})]}),s.jsxs("div",{className:e.stat_card,children:[s.jsx("div",{className:e.stat_icon,children:"‚≠ê"}),s.jsx("div",{className:e.stat_label,children:"–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å"}),s.jsx("div",{className:e.stat_value,children:a.satisfactionScore})]})]}),a.categoryStats&&a.categoryStats.length>0&&s.jsxs("div",{className:e.category_stats,children:[s.jsx("h3",{className:e.category_title,children:"üìÇ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"}),s.jsx("div",{className:e.category_grid,children:a.categoryStats.map(t=>s.jsxs("div",{className:e.category_item,children:[s.jsx("span",{className:e.category_name,children:t.type}),s.jsx("span",{className:e.category_count,children:t.count})]},t.type))})]})]}),i==="report"&&s.jsxs("div",{className:e.analytics_card,children:[s.jsxs("div",{className:e.card_header,children:[s.jsx("h2",{className:e.analytics_title,children:"üìã AI-–æ—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü"}),s.jsx("button",{onClick:T,disabled:v,className:`${e.ai_button} ${v?e.disabled:""}`,children:v?"‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç"})]}),g?s.jsx("div",{className:e.ai_report,children:s.jsx($,{children:g})}):s.jsx("div",{className:e.empty_state,children:"–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-–æ—Ç—á–µ—Ç–∞"})]}),i==="supervisors"&&s.jsxs("div",{className:e.analytics_card,children:[s.jsxs("div",{className:e.card_header,children:[s.jsx("h2",{className:e.analytics_title,children:"üë• Supervisors"}),s.jsx("button",{className:e.add_button,onClick:()=>d(!0),children:"+ –î–æ–±–∞–≤–∏—Ç—å supervisor"})]}),s.jsx("div",{className:e.supervisors_grid,children:p.length===0?s.jsx("div",{className:e.empty_state,children:s.jsx("p",{children:"Supervisors –ø–æ–∫–∞ –Ω–µ—Ç"})}):p.map(t=>s.jsxs("div",{className:e.supervisor_card,children:[s.jsxs("div",{className:e.supervisor_header,children:[s.jsx("div",{className:e.supervisor_avatar,children:t.fullName.split(" ").map(l=>l[0]).join("").substring(0,2)}),s.jsxs("div",{className:e.supervisor_info,children:[s.jsx("h3",{className:e.supervisor_name,children:t.fullName}),s.jsx("div",{className:e.supervisor_types,children:t.types})]})]}),s.jsxs("div",{className:e.supervisor_stats,children:[s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"üì¨"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"–í—Å–µ–≥–æ"}),s.jsx("div",{className:e.supervisor_stat_value,children:t.totalTickets})]})]}),s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"üìÖ"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"–ó–∞ –º–µ—Å—è—Ü"}),s.jsx("div",{className:e.supervisor_stat_value,children:t.ticketsMonth})]})]}),s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"‚ö†Ô∏è"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"–ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö"}),s.jsx("div",{className:e.supervisor_stat_value_problem,children:t.problemTickets})]})]}),s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"‚è±Ô∏è"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"–í—Ä–µ–º—è"}),s.jsxs("div",{className:e.supervisor_stat_value,children:[t.avgResponseTime," —á"]})]})]}),s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"‚≠ê"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"–†–µ–π—Ç–∏–Ω–≥"}),s.jsx("div",{className:e.supervisor_stat_value,children:t.satisfactionScore})]})]}),s.jsxs("div",{className:e.supervisor_stat_item,children:[s.jsx("span",{className:e.supervisor_stat_icon,children:"üë•"}),s.jsxs("div",{children:[s.jsx("div",{className:e.supervisor_stat_label,children:"Support"}),s.jsx("div",{className:e.supervisor_stat_value,children:t.supportCount})]})]})]}),s.jsxs("div",{className:e.supervisor_footer,children:[s.jsxs("span",{className:`${e.supervisor_status} ${t.status==="–û–Ω–ª–∞–π–Ω"?e.online:""}`,children:["‚óè ",t.status]}),s.jsx("button",{className:e.delete_button,onClick:async()=>{confirm(`–£–¥–∞–ª–∏—Ç—å supervisor ${t.fullName}?`)&&(await o.deleteSupervisor(t.id),m(p.filter(l=>l.id!==t.id)))},children:"–£–¥–∞–ª–∏—Ç—å"})]})]},t.id))})]}),w&&s.jsx("div",{className:e.modal_overlay,onClick:()=>d(!1),children:s.jsxs("div",{className:e.modal_content,onClick:t=>t.stopPropagation(),children:[s.jsxs("div",{className:e.supervisor_modal_header,children:[s.jsx("h3",{className:e.supervisor_modal_title,children:"üè¢ –î–æ–±–∞–≤–∏—Ç—å Supervisor"}),s.jsx("p",{className:e.supervisor_modal_description,children:"SUPERVISOR ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤, –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å support"})]}),s.jsxs("div",{className:e.supervisor_modal_body,children:[s.jsxs("div",{className:e.form_group,children:[s.jsxs("label",{className:e.form_label,children:["ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ",s.jsx("span",{className:e.required,children:"*"})]}),s.jsx("input",{type:"number",className:e.form_input,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: 5",value:h,onChange:t=>y(t.target.value)})]}),s.jsxs("div",{className:e.form_group,children:[s.jsxs("label",{className:e.form_label,children:["–¢–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤ ",s.jsx("span",{className:e.required,children:"*"})]}),s.jsx("p",{className:e.form_description,children:"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å supervisor"}),s.jsx("div",{className:e.checkbox_group,children:A.map(t=>s.jsxs("label",{className:e.checkbox_label,children:[s.jsx("input",{type:"checkbox",checked:n.includes(t.code),onChange:l=>{l.target.checked?x([...n,t.code]):x(n.filter(u=>u!==t.code))}}),s.jsx("span",{className:e.checkbox_text,children:t.title}),s.jsx("span",{className:e.checkbox_code,children:t.code})]},t.code))})]}),s.jsxs("div",{className:e.modal_actions,children:[s.jsx("button",{className:e.cancel_button,onClick:()=>d(!1),children:"–û—Ç–º–µ–Ω–∞"}),s.jsx("button",{className:e.submit_button,onClick:I,children:"–ù–∞–∑–Ω–∞—á–∏—Ç—å supervisor"})]})]})]})})]})};export{Es as default};

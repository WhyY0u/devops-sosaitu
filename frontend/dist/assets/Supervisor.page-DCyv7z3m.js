import{a as y,r as c,j as e}from"./index-3cPMuINo.js";import{M as v}from"./Modal-CJlOA3f_.js";import{M as w}from"./index-xs-jf80h.js";const O="_main_container_mhi5c_1",C="_text_one_mhi5c_7",$="_text_two_mhi5c_13",A="_menu_mhi5c_19",T="_menu_button_mhi5c_26",D="_active_mhi5c_45",I="_analytics_card_mhi5c_51",R="_card_header_mhi5c_59",M="_analytics_title_mhi5c_68",P="_ai_button_mhi5c_75",B="_disabled_mhi5c_91",E="_empty_state_mhi5c_103",L="_stats_grid_mhi5c_110",U="_stat_card_mhi5c_117",G="_stat_icon_mhi5c_131",F="_stat_label_mhi5c_136",W="_stat_value_mhi5c_142",q="_ai_report_mhi5c_243",z="_support_manager_mhi5c_501",H="_loading_mhi5c_505",J="_header_with_button_mhi5c_511",K="_add_button_mhi5c_519",Q="_modal_overlay_mhi5c_623",V="_modal_content_mhi5c_634",X="_modal_header_mhi5c_645",Y="_modal_title_mhi5c_650",Z="_modal_description_mhi5c_657",ee="_modal_body_mhi5c_663",te="_form_group_mhi5c_670",se="_form_label_mhi5c_676",ae="_form_input_mhi5c_682",ce="_form_description_mhi5c_697",le="_types_grid_mhi5c_703",ie="_type_checkbox_mhi5c_709",ne="_checked_mhi5c_726",oe="_type_label_mhi5c_738",_e="_modal_footer_mhi5c_744",re="_cancel_button_mhi5c_752",de="_submit_button_mhi5c_753",me="_performance_table_container_mhi5c_782",he="_analytics_subtitle_mhi5c_792",pe="_scroll_display_mhi5c_799",ue="_performance_table_mhi5c_782",xe="_support_name_cell_mhi5c_836",be="_support_category_cell_mhi5c_840",ye="_stat_cell_decided_mhi5c_844",je="_stat_cell_inwork_mhi5c_849",fe="_time_cell_mhi5c_854",Ne="_statusBadge_mhi5c_858",ve="_statusOnline_mhi5c_867",ge="_statusOffline_mhi5c_872",Se="_action_cell_mhi5c_877",ke="_delete_button_small_mhi5c_881",t={main_container:O,text_one:C,text_two:$,menu:A,menu_button:T,active:D,analytics_card:I,card_header:R,analytics_title:M,ai_button:P,disabled:B,empty_state:E,stats_grid:L,stat_card:U,stat_icon:G,stat_label:F,stat_value:W,ai_report:q,support_manager:z,loading:H,header_with_button:J,add_button:K,modal_overlay:Q,modal_content:V,modal_header:X,modal_title:Y,modal_description:Z,modal_body:ee,form_group:te,form_label:se,form_input:ae,form_description:ce,types_grid:le,type_checkbox:ie,checked:ne,type_label:oe,modal_footer:_e,cancel_button:re,submit_button:de,performance_table_container:me,analytics_subtitle:he,scroll_display:pe,performance_table:ue,support_name_cell:xe,support_category_cell:be,stat_cell_decided:ye,stat_cell_inwork:je,time_cell:fe,statusBadge:Ne,statusOnline:ve,statusOffline:ge,action_cell:Se,delete_button_small:ke};class g{async getAnalytics(){return(await y.get("/supervisor/analytics")).data}async getAiInsights(){return(await y.get("/supervisor/ai-insights")).data}async addSupport(_,i){return(await y.post("/supervisor/add-support",{userId:_,types:i})).data}async deleteSupport(_){await y.delete(`/supervisor/support/${_}`)}async getTicketTypes(){return(await y.get("/supervisor/ticket-types")).data}}const we=()=>{const[o,_]=c.useState([]),[i,p]=c.useState([]),[j,f]=c.useState(!0),[N,m]=c.useState(!1),[d,u]=c.useState(""),[n,x]=c.useState([]),[a,l]=c.useState({isOpen:!1,type:"info",title:"",message:""}),b=new g;c.useEffect(()=>{(async()=>{try{const[r,h]=await Promise.all([b.getAnalytics(),b.getTicketTypes()]);p(r.supportPerformance||[]),_(h)}catch(r){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:",r),l({isOpen:!0,type:"info",title:"–û—à–∏–±–∫–∞",message:"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"})}finally{f(!1)}})()},[]);const S=async()=>{if(!d||n.length===0){l({isOpen:!0,type:"info",title:"–û—à–∏–±–∫–∞",message:"–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤"});return}try{await b.addSupport(parseInt(d),n),l({isOpen:!0,type:"info",title:"–£—Å–ø–µ—à–Ω–æ",message:"Support –Ω–∞–∑–Ω–∞—á–µ–Ω"}),m(!1),u(""),x([]);const s=await b.getAnalytics();p(s.supportPerformance||[])}catch(s){l({isOpen:!0,type:"info",title:"–û—à–∏–±–∫–∞",message:s.response?.data||s.message})}},k=(s,r)=>{l({isOpen:!0,type:"confirm",title:"–£–¥–∞–ª–µ–Ω–∏–µ Support",message:`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å support "${r}"? –ï–≥–æ —Ä–æ–ª—å –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω–∞ –¥–æ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.`,onConfirm:async()=>{try{await b.deleteSupport(s),p(i.filter(h=>h.id!==s)),l({isOpen:!0,type:"info",title:"–£—Å–ø–µ—à–Ω–æ",message:"Support —É–¥–∞–ª—ë–Ω"})}catch(h){l({isOpen:!0,type:"info",title:"–û—à–∏–±–∫–∞",message:h.response?.data||h.message})}}})};return j?e.jsx("div",{className:t.loading,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):e.jsxs("div",{className:t.support_manager,children:[e.jsxs("div",{className:t.header_with_button,children:[e.jsxs("div",{children:[e.jsx("h2",{className:t.analytics_title,children:"üë• Support –ø–æ–¥ –≤–∞—à–∏–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º"}),e.jsx("p",{className:t.analytics_subtitle,children:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ support"})]}),e.jsx("button",{className:t.add_button,onClick:()=>m(!0),children:"+ –î–æ–±–∞–≤–∏—Ç—å support"})]}),e.jsx("div",{className:t.performance_table_container,children:i.length===0?e.jsx("div",{className:t.empty_state,children:e.jsx("p",{children:"Support –ø–æ–∫–∞ –Ω–µ—Ç"})}):e.jsx("div",{className:t.scroll_display,children:e.jsxs("table",{className:t.performance_table,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:t.table_header,children:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"}),e.jsx("th",{className:t.table_header,children:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è"}),e.jsx("th",{className:t.table_header,children:"–†–µ—à–µ–Ω–æ"}),e.jsx("th",{className:t.table_header,children:"–í —Ä–∞–±–æ—Ç–µ"}),e.jsx("th",{className:t.table_header,children:"–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è"}),e.jsx("th",{className:t.table_header,children:"–°—Ç–∞—Ç—É—Å"}),e.jsx("th",{className:t.table_header,children:"–î–µ–π—Å—Ç–≤–∏—è"})]})}),e.jsx("tbody",{children:i.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:t.support_name_cell,"data-label":"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",children:s.fullName}),e.jsx("td",{className:t.support_category_cell,"data-label":"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",children:s.category}),e.jsx("td",{className:t.stat_cell_decided,"data-label":"–†–µ—à–µ–Ω–æ",children:s.decided}),e.jsx("td",{className:t.stat_cell_inwork,"data-label":"–í —Ä–∞–±–æ—Ç–µ",children:s.inWork}),e.jsx("td",{className:t.time_cell,"data-label":"–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è",children:s.averageTime?`${s.averageTime.toFixed(1)} —á`:"‚Äî"}),e.jsx("td",{"data-label":"–°—Ç–∞—Ç—É—Å",children:e.jsx("span",{className:`${t.statusBadge} ${s.status.toLowerCase().includes("–æ–Ω–ª–∞–π–Ω")||s.status.toLowerCase().includes("online")?t.statusOnline:t.statusOffline}`,children:s.status})}),e.jsx("td",{className:t.action_cell,"data-label":"–î–µ–π—Å—Ç–≤–∏—è",children:e.jsx("button",{className:t.delete_button_small,onClick:()=>k(s.id,s.fullName),children:"üóëÔ∏è"})})]},`${s.fullName}-${s.category}-${r}`))})]})})}),N&&e.jsx("div",{className:t.modal_overlay,onClick:()=>m(!1),children:e.jsxs("div",{className:t.modal_content,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:t.modal_header,children:[e.jsx("h3",{className:t.modal_title,children:"üë• –î–æ–±–∞–≤–∏—Ç—å Support"}),e.jsx("p",{className:t.modal_description,children:"SUPPORT ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤"})]}),e.jsxs("div",{className:t.modal_body,children:[e.jsxs("div",{className:t.form_group,children:[e.jsx("label",{className:t.form_label,children:"ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Telegram ID)"}),e.jsx("input",{type:"text",className:t.form_input,placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789",value:d,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{className:t.form_group,children:[e.jsx("label",{className:t.form_label,children:"–¢–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤"}),e.jsx("p",{className:t.form_description,children:"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø—ã —Ç–∏–∫–µ—Ç–æ–≤, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å support"}),e.jsx("div",{className:t.types_grid,children:o.map(s=>e.jsxs("label",{className:`${t.type_checkbox} ${n.includes(s.code)?t.checked:""}`,children:[e.jsx("input",{type:"checkbox",checked:n.includes(s.code),onChange:()=>{n.includes(s.code)?x(n.filter(r=>r!==s.code)):x([...n,s.code])}}),e.jsx("span",{className:t.type_label,children:s.title})]},s.code))})]})]}),e.jsxs("div",{className:t.modal_footer,children:[e.jsx("button",{className:t.cancel_button,onClick:()=>m(!1),children:"–û—Ç–º–µ–Ω–∞"}),e.jsx("button",{className:t.submit_button,onClick:S,children:"–ù–∞–∑–Ω–∞—á–∏—Ç—å support"})]})]})}),e.jsx(v,{isOpen:a.isOpen&&a.type==="info",onClose:()=>l({...a,isOpen:!1}),title:a.title,type:"info",children:e.jsx("p",{children:a.message})}),e.jsx(v,{isOpen:a.isOpen&&a.type==="confirm",onClose:()=>l({...a,isOpen:!1}),title:a.title,type:"confirm",onConfirm:a.onConfirm,children:e.jsx("p",{children:a.message})})]})},Ae=()=>{const[o,_]=c.useState("analytics"),[i,p]=c.useState(null),[j,f]=c.useState(""),[N,m]=c.useState(!0),[d,u]=c.useState(!1),n=new g;c.useEffect(()=>{(async()=>{try{const l=await n.getAnalytics();p(l)}catch(l){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:",l)}finally{m(!1)}})()},[]);const x=async()=>{u(!0);try{const a=await n.getAiInsights();f(a)}catch(a){console.warn("AI –æ—Ç—á–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:",a),f("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç")}finally{u(!1)}};return N?e.jsx("div",{className:t.main_container,children:"–ó–∞–≥—Ä—É–∑–∫–∞..."}):e.jsxs("div",{className:t.main_container,children:[e.jsx("p",{className:t.text_one,children:"–ü–∞–Ω–µ–ª—å —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä–∞"}),e.jsx("p",{className:t.text_two,children:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ support –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤–∞—à–∏–º —Ç–∏–ø–∞–º —Ç–∏–∫–µ—Ç–æ–≤"}),e.jsxs("div",{className:t.menu,children:[e.jsx("button",{className:`${t.menu_button} ${o==="analytics"?t.active:""}`,onClick:()=>_("analytics"),children:"üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞"}),e.jsx("button",{className:`${t.menu_button} ${o==="report"?t.active:""}`,onClick:()=>_("report"),children:"üìã AI-–æ—Ç—á–µ—Ç"}),e.jsx("button",{className:`${t.menu_button} ${o==="supports"?t.active:""}`,onClick:()=>_("supports"),children:"üë• Support"})]}),o==="analytics"&&i&&e.jsxs("div",{className:t.analytics_card,children:[e.jsx("div",{className:t.card_header,children:e.jsx("h2",{className:t.analytics_title,children:"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–∞—à–∏–º —Ç–∏–ø–∞–º —Ç–∏–∫–µ—Ç–æ–≤"})}),e.jsxs("div",{className:t.stats_grid,children:[e.jsxs("div",{className:t.stat_card,children:[e.jsx("div",{className:t.stat_icon,children:"üì¨"}),e.jsx("div",{className:t.stat_label,children:"–í—Å–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏–π"}),e.jsx("div",{className:t.stat_value,children:i.totalTickets})]}),e.jsxs("div",{className:t.stat_card,children:[e.jsx("div",{className:t.stat_icon,children:"üìÖ"}),e.jsx("div",{className:t.stat_label,children:"–ó–∞ –º–µ—Å—è—Ü"}),e.jsx("div",{className:t.stat_value,children:i.ticketsMonth})]}),e.jsxs("div",{className:t.stat_card,children:[e.jsx("div",{className:t.stat_icon,children:"‚ö†Ô∏è"}),e.jsx("div",{className:t.stat_label,children:"–ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö"}),e.jsx("div",{className:t.stat_value,children:i.problemTickets})]}),e.jsxs("div",{className:t.stat_card,children:[e.jsx("div",{className:t.stat_icon,children:"‚è±Ô∏è"}),e.jsx("div",{className:t.stat_label,children:"–°—Ä. –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞"}),e.jsxs("div",{className:t.stat_value,children:[i.avgResponseTime," —á"]})]}),e.jsxs("div",{className:t.stat_card,children:[e.jsx("div",{className:t.stat_icon,children:"‚≠ê"}),e.jsx("div",{className:t.stat_label,children:"–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å"}),e.jsx("div",{className:t.stat_value,children:i.satisfactionScore})]})]})]}),o==="report"&&e.jsxs("div",{className:t.analytics_card,children:[e.jsxs("div",{className:t.card_header,children:[e.jsx("h2",{className:t.analytics_title,children:"üìã AI-–æ—Ç—á–µ—Ç"}),e.jsx("button",{onClick:x,disabled:d,className:`${t.ai_button} ${d?t.disabled:""}`,children:d?"‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è...":"ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç"})]}),j?e.jsx("div",{className:t.ai_report,children:e.jsx(w,{children:j})}):e.jsx("div",{className:t.empty_state,children:"–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-–æ—Ç—á–µ—Ç–∞"})]}),o==="supports"&&e.jsx(we,{})]})};export{Ae as default};
